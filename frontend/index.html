<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Restaurant System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style/styles.css" />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: { sans: ["Inter", "sans-serif"] },
            colors: { primary: "#0f172a" },
          },
        },
      };
    </script>
    <style>
      .fade-in {
        animation: fadeIn 0.3s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(5px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body
    class="text-slate-900 antialiased h-screen flex overflow-hidden bg-slate-50"
  >
    <div
      id="mobile-overlay"
      onclick="toggleSidebar()"
      class="hidden sidebar-overlay md:hidden"
    ></div>

    <aside
      id="sidebar"
      class="fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-slate-200 flex flex-col justify-between transform -translate-x-full transition-transform duration-300 md:relative md:translate-x-0"
    >
      <div>
        <div
          class="h-16 flex items-center justify-between px-6 border-b border-slate-100"
        >
          <div class="flex items-center">
            <i class="fa-solid fa-utensils text-slate-900 mr-2 text-xl"></i>
            <span class="font-bold text-lg tracking-tight">RestoApp</span>
          </div>
          <button onclick="toggleSidebar()" class="md:hidden text-slate-500">
            <i class="fa-solid fa-xmark text-xl"></i>
          </button>
        </div>
        <nav class="p-4 space-y-1">
          <button
            onclick="nav('dashboard'); toggleSidebarIfMobile()"
            id="btn-dashboard"
            class="nav-item w-full flex items-center space-x-3 px-4 py-2.5 text-sm font-medium rounded-md bg-slate-900 text-white"
          >
            <i class="fa-solid fa-chart-pie w-5"></i><span>Dashboard</span>
          </button>
          <button
            onclick="nav('orders'); toggleSidebarIfMobile()"
            id="btn-orders"
            class="nav-item w-full flex items-center space-x-3 px-4 py-2.5 text-sm font-medium rounded-md text-slate-600 hover:bg-slate-50"
          >
            <i class="fa-solid fa-cash-register w-5"></i
            ><span>POS / Order</span>
          </button>
          <button
            onclick="nav('reservations'); toggleSidebarIfMobile()"
            id="btn-reservations"
            class="nav-item w-full flex items-center space-x-3 px-4 py-2.5 text-sm font-medium rounded-md text-slate-600 hover:bg-slate-50"
          >
            <i class="fa-regular fa-calendar-check w-5"></i
            ><span>Reservations</span>
          </button>
          <button
            onclick="nav('tables'); toggleSidebarIfMobile()"
            id="btn-tables"
            class="nav-item w-full flex items-center space-x-3 px-4 py-2.5 text-sm font-medium rounded-md text-slate-600 hover:bg-slate-50"
          >
            <i class="fa-solid fa-chair w-5"></i><span>Tables</span>
          </button>
          <button
            onclick="nav('menu'); toggleSidebarIfMobile()"
            id="btn-menu"
            class="nav-item w-full flex items-center space-x-3 px-4 py-2.5 text-sm font-medium rounded-md text-slate-600 hover:bg-slate-50"
          >
            <i class="fa-solid fa-book-open w-5"></i><span>Menu List</span>
          </button>
          <button
            onclick="nav('customers'); toggleSidebarIfMobile()"
            id="btn-customers"
            class="nav-item w-full flex items-center space-x-3 px-4 py-2.5 text-sm font-medium rounded-md text-slate-600 hover:bg-slate-50"
          >
            <i class="fa-solid fa-users w-5"></i><span>Customers</span>
          </button>
        </nav>
      </div>
    </aside>

    <main class="flex-1 flex flex-col h-screen overflow-hidden relative w-full">
      <header
        class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 md:px-8 flex-shrink-0"
      >
        <div class="flex items-center gap-3">
          <button
            onclick="toggleSidebar()"
            class="md:hidden p-2 text-slate-600 hover:bg-slate-100 rounded-lg"
          >
            <i class="fa-solid fa-bars text-xl"></i>
          </button>
          <h2 id="page-title" class="text-lg font-semibold text-slate-800">
            Overview
          </h2>
        </div>
        <div class="flex items-center gap-3">
          <div
            class="text-xs md:text-sm text-slate-500 hidden md:block"
            id="api-status"
          >
            Connecting...
          </div>
          <div
            class="h-8 w-8 bg-slate-200 rounded-full flex items-center justify-center text-xs font-bold text-slate-600"
          >
            A
          </div>
        </div>
      </header>

      <div class="flex-1 overflow-hidden relative">
        <div
          id="main-content-area"
          class="h-full overflow-auto p-4 md:p-8 space-y-6"
        ></div>
      </div>
    </main>

    <div
      id="menu-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm"
    >
      <div class="bg-white p-6 rounded-xl w-96 shadow-2xl">
        <h3 class="font-bold mb-4 text-lg" id="menu-modal-title">
          Add New Menu
        </h3>
        <input type="hidden" id="menu-edit-id" />
        <input
          type="text"
          id="new-menu-name"
          placeholder="Menu Name"
          class="w-full border p-2.5 rounded-lg mb-3 focus:ring-2 focus:ring-slate-900 outline-none"
        />
        <input
          type="number"
          id="new-menu-price"
          placeholder="Price (Rp)"
          class="w-full border p-2.5 rounded-lg mb-6 focus:ring-2 focus:ring-slate-900 outline-none"
        />
        <div class="flex justify-end gap-2">
          <button
            onclick="closeModal('menu-modal')"
            class="text-slate-500 px-4 py-2 hover:bg-slate-100 rounded-lg"
          >
            Cancel
          </button>
          <button
            onclick="saveMenu()"
            class="bg-slate-900 text-white px-6 py-2 rounded-lg hover:bg-slate-800"
          >
            Save
          </button>
        </div>
      </div>
    </div>
    <div
      id="customer-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm"
    >
      <div class="bg-white p-6 rounded-xl w-96 shadow-2xl">
        <h3 class="font-bold mb-4 text-lg" id="cust-modal-title">
          Add New Customer
        </h3>
        <input type="hidden" id="cust-edit-id" />
        <input
          type="text"
          id="new-cust-name"
          placeholder="Name"
          class="w-full border p-2.5 rounded-lg mb-3 focus:ring-2 focus:ring-slate-900 outline-none"
        />
        <input
          type="text"
          id="new-cust-phone"
          placeholder="Phone Number"
          class="w-full border p-2.5 rounded-lg mb-6 focus:ring-2 focus:ring-slate-900 outline-none"
        />
        <div class="flex justify-end gap-2">
          <button
            onclick="closeModal('customer-modal')"
            class="text-slate-500 px-4 py-2 hover:bg-slate-100 rounded-lg"
          >
            Cancel
          </button>
          <button
            onclick="saveCustomer()"
            class="bg-slate-900 text-white px-6 py-2 rounded-lg hover:bg-slate-800"
          >
            Save
          </button>
        </div>
      </div>
    </div>
    <div
      id="table-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm"
    >
      <div class="bg-white p-6 rounded-xl w-96 shadow-2xl">
        <h3 class="font-bold mb-4 text-lg" id="table-modal-title">
          Add New Table
        </h3>
        <input type="hidden" id="table-edit-id" />
        <input
          type="number"
          id="new-table-num"
          placeholder="Table Number (e.g. 10)"
          class="w-full border p-2.5 rounded-lg mb-3 focus:ring-2 focus:ring-slate-900 outline-none"
        />
        <input
          type="number"
          id="new-table-cap"
          placeholder="Capacity (e.g. 4)"
          class="w-full border p-2.5 rounded-lg mb-6 focus:ring-2 focus:ring-slate-900 outline-none"
        />
        <div class="flex justify-end gap-2">
          <button
            onclick="closeModal('table-modal')"
            class="text-slate-500 px-4 py-2 hover:bg-slate-100 rounded-lg"
          >
            Cancel
          </button>
          <button
            onclick="saveTable()"
            class="bg-slate-900 text-white px-6 py-2 rounded-lg hover:bg-slate-800"
          >
            Save
          </button>
        </div>
      </div>
    </div>
    <div
      id="reservation-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm"
    >
      <div class="bg-white p-6 rounded-xl w-96 shadow-2xl">
        <h3 class="font-bold mb-4 text-lg" id="res-modal-title">
          New Reservation
        </h3>
        <input type="hidden" id="res-edit-id" />
        <div class="mb-3">
          <label class="text-xs font-semibold text-slate-500">Customer</label>
          <select
            id="res-cust-id"
            class="w-full border p-2.5 rounded-lg focus:ring-2 focus:ring-slate-900 outline-none text-sm bg-white"
          >
            <option value="">Loading...</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="text-xs font-semibold text-slate-500">Table</label>
          <select
            id="res-table-id"
            class="w-full border p-2.5 rounded-lg focus:ring-2 focus:ring-slate-900 outline-none text-sm bg-white"
          >
            <option value="">Loading...</option>
          </select>
        </div>
        <div class="flex gap-2 mb-6">
          <div class="w-1/2">
            <label class="text-xs font-semibold text-slate-500">Date</label
            ><input
              type="date"
              id="res-date"
              class="w-full border p-2.5 rounded-lg"
            />
          </div>
          <div class="w-1/2">
            <label class="text-xs font-semibold text-slate-500">Time</label
            ><input
              type="time"
              id="res-time"
              class="w-full border p-2.5 rounded-lg"
            />
          </div>
        </div>
        <div class="flex justify-end gap-2">
          <button
            onclick="closeModal('reservation-modal')"
            class="text-slate-500 px-4 py-2 hover:bg-slate-100 rounded-lg"
          >
            Cancel
          </button>
          <button
            onclick="saveReservation()"
            class="bg-slate-900 text-white px-6 py-2 rounded-lg hover:bg-slate-800"
          >
            Save
          </button>
        </div>
      </div>
    </div>

    <div
      id="error-toast"
      class="hidden fixed bottom-5 right-5 bg-red-600 text-white px-4 py-3 rounded-lg shadow-lg fade-in"
    ></div>

    <script src="js/config.js"></script>
    <script src="js/state.js"></script>
    <script src="js/api.js"></script>
    <script src="js/utils.js"></script>

    <script src="js/templates.js"></script>

    <script src="js/navigation.js"></script>
    <script src="js/modules/menu.js"></script>
    <script src="js/modules/customer.js"></script>
    <script src="js/modules/table.js"></script>
    <script src="js/modules/reservation.js"></script>
    <script src="js/modules/pos.js"></script>
    <script src="js/modules/dashboard.js"></script>
    <script src="js/main.js"></script>
    <script>
      function toggleSidebar() {
        const sidebar = document.getElementById("sidebar");
        const overlay = document.getElementById("mobile-overlay");
        if (sidebar.classList.contains("sidebar-mobile-open")) {
          sidebar.classList.remove("sidebar-mobile-open");
          overlay.classList.add("hidden");
        } else {
          sidebar.classList.add("sidebar-mobile-open");
          overlay.classList.remove("hidden");
        }
      }
      function toggleSidebarIfMobile() {
        if (window.innerWidth < 768) {
          toggleSidebar();
        }
      }
    </script>
  </body>
</html>
